{% extends "base.html" %}
{% block map_script %}

        function load() {
          if (GBrowserIsCompatible()) {
            var map = new GMap2(document.getElementById("map"));
            map.setCenter(new GLatLng(34.002, -81.0239), 10);
            map.addControl(new GSmallMapControl());
          }
          // Adds a Marker
          var tinyIcon = new GIcon();
          tinyIcon.image = "{{ MEDIA_URL }}img/mm_20_purple.png";
          tinyIcon.shadow = "http://labs.google.com/ridefinder/images/mm_20_shadow.png";
          tinyIcon.iconSize = new GSize(12, 20);
          tinyIcon.shadowSize = new GSize(22, 20);
          tinyIcon.iconAnchor = new GPoint(6, 20);
          tinyIcon.infoWindowAnchor = new GPoint(5, 1);
          tinyIcon.image = "{{ MEDIA_URL }}img/mm_20_{{ object.crime_type.marker_color }}.png";
          var marker = new GMarker(new GLatLng('{{ object.latitude }}', '{{ object.longitude }}'), {title: "{{ object.crime_type }}", icon:tinyIcon});
          map.addOverlay(marker);
        }

{% endblock %}
{% block crime_list %}
    {% if object%}
            <div class="crime row_{% cycle 'even' 'odd' %}">
                <h3>{{ object.crime_type }}</h3>
                <p>{{ object.block }} block of {{ object.street }}.</p>
                <p>Reported by {{ object.agency }}</p>
                <p>{{ object.description }}</p>
            </div>
    {% else %}
        <div class="crime row_even">
            <p>There is no crime that fits this criteria.</p>
        </div>
    {% endif %}
{% endblock %}

